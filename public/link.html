<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Betaalverzoek</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <style>
    body{margin:0;background:linear-gradient(135deg,#f5f9ff,#e8fff8);min-height:100vh;display:flex;align-items:center;justify-content:center;font-family:system-ui;padding:20px;}
    .c{max-width:380px;width:100%;background:#fff;border-radius:20px;box-shadow:0 12px 30px rgba(0,0,0,.1);overflow:hidden;text-align:center;}
    .h{background:linear-gradient(120deg,#a8e6cf,#d4a5ff);padding:32px 20px;color:#2d1b4e;}
    .h h1{font:700 30px 'Poppins',sans-serif;margin:0 0 6px;}
    .a{font:800 48px system-ui;background:linear-gradient(90deg,#55efc4,#a29bfe);-webkit-background-clip:text;color:transparent;}
    .k{width:21px;height:21px;background:#00b894;border-radius:50%;color:#fff;display:inline-block;font:bold 14px/21px Arial;margin-left:8px;}
    .b{background:linear-gradient(90deg,#55efc4,#81ecec);color:#2d1b4e;font:700 18px system-ui;padding:16px;border:none;border-radius:14px;width:90%;text-decoration:none;display:flex;align-items:center;justify-content:center;margin:20px auto;box-shadow:0 8px 20px rgba(85,239,196,.3);}
    .b img{height:28px;margin-left:12px;}
    .e{background:#fff;border-radius:20px;padding:60px 20px;box-shadow:0 12px 30px rgba(0,0,0,.1);max-width:380px;margin:auto;text-align:center;}
    .e h2{color:#e74c3c;}
  </style>
</head>
<body>
  <div id="app">Laden...</div>

  <script>
    const slug = location.pathname.split('/link/')[1];
    if (!slug) { document.getElementById('app').innerHTML = '<div class="e"><h2>Ongeldige link</h2></div>'; }
    else {
      fetch(`https://betaalverzoek-nu.vercel.app/api/open?id=${slug}`)
        .then(r => r.json())
        .then(d => {
          if (d.expired) throw new Error("expired");
          document.getElementById('app').innerHTML = `
            <div class="c">
              <div class="h"><h1>Betaalverzoek</h1><p>Snel en veilig betalen</p></div>
              <div style="padding:24px 20px">
                <div class="a">€${parseFloat(d.price).toFixed(2).replace('.',',')}</div>
                <div style="margin:16px 0;color:#555;font-size:17px">${d.article} via <strong>${d.via}</strong></div>
                <div style="background:#f8f5ff;border:2px solid #e0d6ff;border-radius:14px;padding:16px;margin:20px 0">
                  Ontvanger<br><strong>${d.receiver} <span class="k">✓</span></strong>
                </div>
                <a href="${d.checkout}" class="b">Nu betalen met iDEAL <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ad/IDEAL_%28Bezahlsystem%29_logo.svg/1200px-IDEAL_%28Bezahlsystem%29_logo.svg.png"></a>
              </div>
            </div>`;
        })
        .catch(() => {
          document.getElementById('app').innerHTML = `<div class="e"><h2>Deze betaallink is verlopen</h2><p>Hij werkte slechts 7 minuten na de eerste opening.</p></div>`;
        });
    }
  </script>
</body>
</html>
<!-- rebuild  -->
